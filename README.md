# Lab: Hardened Local Cloud Instance (Vagrant Challenge)

## ðŸŽ¯ Objective

Welcome to the **Hardened Local Cloud Challenge**. This lab moves beyond simple tutorials to test your ability to engineer a secure, automated local development environment that mimics a production-grade **Cloud Instance**.

You are tasked with deploying a VM using **Vagrant** and **Cloud-Init**. Unlike previous labs, **no solution code is provided**. You must research the configuration syntax, implement the security requirements, and prove your success using an automated validation pipeline.

**Core Technologies:**

- **Vagrant**: Local infrastructure orchestration.
- **Cloud-Init**: Industry-standard initialization for cloud-native instances.
- **UFW (Uncomplicated Firewall)**: Network security and traffic filtering.
- **SSH Hardening**: Cryptographic authentication and daemon lockdown.

---

## ðŸ“Œ Requirements

Your infrastructure must meet the following strict specifications:

### 1. Networking & Infrastructure

- **Base Image**: Use a generic Ubuntu 24.04 box (e.g., `bento/ubuntu-24.04`).
- **Private Network**: The VM must be assigned a static private IP address: `192.168.56.10`.
- **Provider**: Configuration must be compatible with VirtualBox.

### 2. User & Environment

- **Dedicated User**: Create a user named `student`.
- **Privileges**: The `student` user must have `sudo` capabilities.
- **Default Shell**: The shell for `student` must be `/bin/zsh`.
- **Environment**:
  - Install `git`, `curl`, `zsh`, and `nginx`.
  - Install **Oh My Zsh** for the `student` user (unattended installation).

### 3. Security Hardening

- **Firewall (UFW)**:
  - Default policy: **Deny all incoming**.
  - Allow **SSH** (Port 22).
  - Allow **HTTP** (Port 80) to serve the Nginx default page.
- **SSH Daemon Configuration**:
  - **No Password Authentication**: Only SSH keys allowed.
  - **No Root Login**: Prevent direct root access via SSH.
  - **Public Key**: Inject your personal SSH public key for the `student` user.

### 4. Automation Strategy

- The `Vagrantfile` should only handle hardware, networking, and passing the metadata.
- **All OS-level configuration** (users, packages, firewall, SSH hardening, script execution) **must** be performed via the `user-data` (Cloud-Init) file.

---

## ðŸ›  Workflow: Research & Implement

This lab follows a professional engineering workflow:

1.  **Research**: Use the [Cloud-Init Documentation](https://cloudinit.readthedocs.io/) and [Vagrant Networking Docs](https://developer.hashicorp.com/vagrant/docs/networking/private_network).
2.  **Draft**: Create your `Vagrantfile` and `user-data`.
3.  **Deploy**: Run `vagrant up`.
4.  **Debug**: If it fails, inspect `/var/log/cloud-init-output.log` inside the VM.
5.  **Validate**: Run the automated script provided below.

---

## ðŸ§ª Automated Validation Pipeline

Screenshots are **not accepted** for this lab. You must use the following validation script to generate a compliance report.

### The Validation Script (`validate.sh`)

Copy this script into your VM (or create it via Cloud-Init) and run it as `root` or with `sudo`.

```bash
```

---

## ðŸ“¤ Submission Requirements

To complete the lab, you must submit a Pull Request containing:

1.  `Vagrantfile`: Your researched and implemented configuration.
2.  `user-data`: Your Cloud-Init configuration.
3.  `validation_report.txt`: The output generated by the validation script inside your VM.

**Note**: Any submission containing screenshots or missing the `validation_report.txt` will be automatically rejected.

---

## ðŸ† Grading Matrix (Hardened)

| Criteria               | Points | Description                                                          |
| :--------------------- | :----- | :------------------------------------------------------------------- |
| **Networking**         | 20     | VM reachable at `192.168.56.10` via private network.                 |
| **Automation**         | 20     | 100% of OS config is in `user-data` (Cloud-Init).                    |
| **Security Hardening** | 30     | UFW active, SSH passwordless, Root login disabled.                   |
| **Environment**        | 10     | `student` user, Zsh, Oh My Zsh, and Nginx functioning.               |
| **Validation**         | 20     | Submission of a clean `validation_report.txt` with all [PASS] marks. |

---

> "Security is not a product, but a process. If you can't automate your hardening, you haven't mastered your infrastructure."
